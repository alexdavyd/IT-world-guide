# –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ: –æ—Å–Ω–æ–≤—ã, —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∏ –ø–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏

–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî –æ–¥–∏–Ω –∏–∑ —Å–∞–º—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–æ–≤ –ø–æ–≤—ã—Å–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã –∏ —Å–Ω–∏–∑–∏—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ —Ä–µ—Å—É—Ä—Å—ã. –û–¥–Ω–∞–∫–æ –æ–Ω–æ –¥–æ–±–∞–≤–ª—è–µ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç—å –∏ —Ç—Ä–µ–±—É–µ—Ç –ø–æ–Ω–∏–º–∞–Ω–∏—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤. –≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –ø–æ–º–æ–∂–µ—Ç —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è –≤ —Ç–µ–æ—Ä–∏–∏ –∏ –ø—Ä–∞–∫—Ç–∏–∫–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è.

---

## 1. –ß—Ç–æ —Ç–∞–∫–æ–µ –∫—ç—à?

**–ö—ç—à** (cache) ‚Äî –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Å –±—ã—Å—Ç—Ä—ã–º –¥–æ—Å—Ç—É–ø–æ–º, –≤ –∫–æ—Ç–æ—Ä–æ–º —Ö—Ä–∞–Ω—è—Ç—Å—è –∫–æ–ø–∏–∏ –¥–∞–Ω–Ω—ã—Ö, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –¥–æ—Ä–æ–≥–æ—Å—Ç–æ—è—â–∏—Ö –æ–±—Ä–∞—â–µ–Ω–∏–π –∫ –∏—Å—Ö–æ–¥–Ω–æ–º—É –∏—Å—Ç–æ—á–Ω–∏–∫—É (–¥–∏—Å–∫—É, –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö, –≤–Ω–µ—à–Ω–µ–º—É API).

üîç **–ê–Ω–∞–ª–æ–≥–∏—è –∏–∑ –∂–∏–∑–Ω–∏**  
–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ –≤—ã –≥–æ—Ç–æ–≤–∏—Ç–µ —Å–ª–æ–∂–Ω–æ–µ –±–ª—é–¥–æ. –†–µ—Ü–µ–ø—Ç –º–æ–∂–Ω–æ –∫–∞–∂–¥—ã–π —Ä–∞–∑ –∏—Å–∫–∞—Ç—å –≤ –∫—É–ª–∏–Ω–∞—Ä–Ω–æ–π –∫–Ω–∏–≥–µ (–¥–æ–ª–≥–æ), –∞ –º–æ–∂–Ω–æ –¥–µ—Ä–∂–∞—Ç—å –ø–æ–¥ —Ä—É–∫–æ–π –æ–¥–Ω—É –∫–∞—Ä—Ç–æ—á–∫—É —Å –Ω—É–∂–Ω—ã–º —Ä–µ—Ü–µ–ø—Ç–æ–º (–±—ã—Å—Ç—Ä–æ). –ö—ç—à ‚Äî —ç—Ç–æ —Ç–∞ —Å–∞–º–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞.

**–ì–¥–µ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- –ü—Ä–æ—Ü–µ—Å—Å–æ—Ä (–∫—ç—à L1, L2, L3)  
- –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ (page cache)  
- –ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–±—É—Ñ–µ—Ä–Ω—ã–π –ø—É–ª, –∫—ç—à –∑–∞–ø—Ä–æ—Å–æ–≤)  
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è (in-memory –∫—ç—à, –Ω–∞–ø—Ä–∏–º–µ—Ä Redis)  
- –°–µ—Ç—å (DNS-–∫—ç—à, HTTP-–∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞, CDN)  

---

## 2. –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–±–æ—Ç—ã

- **–í—Ä–µ–º–µ–Ω–Ω–∞—è –ª–æ–∫–∞–ª—å–Ω–æ—Å—Ç—å (temporal locality):** –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å–∏–ª–∏ —Å–µ–π—á–∞—Å, –æ–Ω–∏ —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è —Å–Ω–æ–≤–∞ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.  
- **–ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –ª–æ–∫–∞–ª—å–Ω–æ—Å—Ç—å (spatial locality):** –µ—Å–ª–∏ –∑–∞–ø—Ä–æ—à–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ, –≤–µ—Ä–æ—è—Ç–Ω–æ, –ø–æ—Ç—Ä–µ–±—É—é—Ç—Å—è –∏ —Å–æ—Å–µ–¥–Ω–∏–µ —Å –Ω–∏–º–∏.  

### Cache Hit / Miss
- **Cache Hit** ‚Äî –¥–∞–Ω–Ω—ã–µ –Ω–∞–π–¥–µ–Ω—ã –≤ –∫—ç—à–µ, –æ—Ç–≤–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –±—ã—Å—Ç—Ä–æ.  
- **Cache Miss** ‚Äî –¥–∞–Ω–Ω—ã—Ö –≤ –∫—ç—à–µ –Ω–µ—Ç, –Ω—É–∂–Ω–æ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –∏—Å—Ö–æ–¥–Ω–æ–º—É –∏—Å—Ç–æ—á–Ω–∏–∫—É, –∑–∞—Ç–µ–º —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–æ–ø–∏—é –≤ –∫—ç—à.  

**Hit ratio** = –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø–∞–¥–∞–Ω–∏–π / –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤. –≠—Ç–æ –≥–ª–∞–≤–Ω–∞—è –º–µ—Ç—Ä–∏–∫–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∫—ç—à–∞.

---

## 3. –í–∏–¥—ã –∫—ç—à–∞ –ø–æ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—é

| –¢–∏–ø                  | –ü—Ä–∏–º–µ—Ä—ã                                        | –ì–¥–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è                                |
|----------------------|------------------------------------------------|------------------------------------------------|
| In-memory cache      | Redis, Memcached, Hazelcast, Caffeine          | –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ë–î, —Å–µ—Å—Å–∏–π, –≤—ã—á–∏—Å–ª–µ–Ω–∏–π |
| HTTP-–∫—ç—à             | –ë—Ä–∞—É–∑–µ—Ä–Ω—ã–π –∫—ç—à, Varnish, CDN (Cloudflare, AWS) | –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏–∫–∏, –æ—Ç–≤–µ—Ç–æ–≤ API               |
| –ö—ç—à –ë–î               | –ë—É—Ñ–µ—Ä–Ω—ã–π –ø—É–ª InnoDB, shared buffers PostgreSQL | –£—Å–∫–æ—Ä–µ–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –¥–∞–Ω–Ω—ã–º          |
| –ö—ç—à –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è       | in-process (lru_cache –≤ Python), Guava Cache   | –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–Ω—É—Ç—Ä–∏ –æ–¥–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞              |
| –ö—ç—à —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã | Page cache –û–°                                  | –£—Å–∫–æ—Ä–µ–Ω–∏–µ —á—Ç–µ–Ω–∏—è —Å –¥–∏—Å–∫–∞                       |

---

## 4. –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –Ω–∞–ø–æ–ª–Ω–µ–Ω–∏—è –∫—ç—à–∞ (–∫–æ–≥–¥–∞ –¥–∞–Ω–Ω—ã–µ –ø–æ–ø–∞–¥–∞—é—Ç –≤ –∫—ç—à)

### 4.1. Cache-Aside (Lazy Loading)
–°–∞–º—ã–π —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–∞–º–æ —É–ø—Ä–∞–≤–ª—è–µ—Ç –∫—ç—à–µ–º.

1. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—ã—Ç–∞–µ—Ç—Å—è –ø—Ä–æ—á–∏—Ç–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ –∫—ç—à–∞.
2. –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç (–ø—Ä–æ–º–∞—Ö), —á–∏—Ç–∞–µ—Ç –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–π –ë–î.
3. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ–µ –≤ –∫—ç—à.
4. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

```python
# –ü—Å–µ–≤–¥–æ–∫–æ–¥
def get_user(user_id):
    data = cache.get(user_id)
    if data is None:
        data = db.query("SELECT * FROM users WHERE id = ?", user_id)
        cache.set(user_id, data, ttl=3600)
    return data
```

**–ü–ª—é—Å—ã:** –ø—Ä–æ—Å—Ç–æ—Ç–∞, –∫—ç—à —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ —Ä–µ–∞–ª—å–Ω–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ.  
**–ú–∏–Ω—É—Å—ã:** –ø–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å –≤—Å–µ–≥–¥–∞ –º–µ–¥–ª–µ–Ω–Ω—ã–π, –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –Ω—É–∂–Ω–æ —è–≤–Ω–æ –∏–Ω–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –∫—ç—à.

### 4.2. Read-Through
–ö—ç—à —Å–∞–º —É–º–µ–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ –∏—Å—Ç–æ—á–Ω–∏–∫–∞. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ–±—Ä–∞—â–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫ –∫—ç—à—É.

- –ü—Ä–∏ –ø—Ä–æ–º–∞—Ö–µ –∫—ç—à –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ –ë–î, –∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é.
- –õ–æ–≥–∏–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä–æ–≤–∞–Ω–∞ –≤ –∫—ç—à–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, CacheLoader –≤ Guava –∏–ª–∏ Read-Through –≤ Redis —Å –º–æ–¥—É–ª—è–º–∏).

### 4.3. Write-Through
–î–∞–Ω–Ω—ã–µ —Å–Ω–∞—á–∞–ª–∞ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ –∫—ç—à, –∑–∞—Ç–µ–º —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –≤ –ë–î.

```python
def update_user(user_id, data):
    cache.set(user_id, data)
    db.execute("UPDATE users SET ... WHERE id = ?", data)
```

**–ü–ª—é—Å—ã:** –∫—ç—à –≤—Å–µ–≥–¥–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω —Å –ë–î (—Å–∏–ª—å–Ω–∞—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å).  
**–ú–∏–Ω—É—Å—ã:** —É–≤–µ–ª–∏—á–µ–Ω–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –∑–∞–ø–∏—Å–∏, –∫—ç—à –º–æ–∂–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–¥–∫–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ.

### 4.4. Write-Behind (Write-Back)
–î–∞–Ω–Ω—ã–µ –ø–∏—à—É—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –∫—ç—à, –∞ –≤ –ë–î ‚Äî –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ, –ø–∞–∫–µ—Ç–Ω–æ –∏–ª–∏ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π.

```python
def update_user(user_id, data):
    cache.set(user_id, data)
    background_scheduler.schedule(db_update, user_id, data)
```

**–ü–ª—é—Å—ã:** –æ—á–µ–Ω—å –±—ã—Å—Ç—Ä–∞—è –∑–∞–ø–∏—Å—å, —Å–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –ë–î.  
**–ú–∏–Ω—É—Å—ã:** —Ä–∏—Å–∫ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ —Å–±–æ–µ –∫—ç—à–∞, —Å–ª–æ–∂–Ω–æ—Å—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.

### 4.5. Write-Around
–î–∞–Ω–Ω—ã–µ –ø–∏—à—É—Ç—Å—è —Å—Ä–∞–∑—É –≤ –ë–î, –∞ –≤ –∫—ç—à –ø–æ–ø–∞–¥–∞—é—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–æ—Å–ª–µ–¥—É—é—â–µ–º —á—Ç–µ–Ω–∏–∏ (—á–µ—Ä–µ–∑ Cache-Aside). –•–æ—Ä–æ—à–æ –¥–ª—è –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ —á–∞—Å—Ç–æ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è, –Ω–æ —Ä–µ–¥–∫–æ —á–∏—Ç–∞—é—Ç—Å—è.

---

## 5. –ü–æ–ª–∏—Ç–∏–∫–∏ –≤—ã—Ç–µ—Å–Ω–µ–Ω–∏—è (eviction policies)

–ö–æ–≥–¥–∞ –∫—ç—à –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω, –Ω—É–∂–Ω–æ —Ä–µ—à–∞—Ç—å, –∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ —É–¥–∞–ª–∏—Ç—å.

- **LRU (Least Recently Used)** ‚Äî —É–¥–∞–ª—è—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ, –∫ –∫–æ—Ç–æ—Ä—ã–º –¥–æ–ª—å—à–µ –≤—Å–µ–≥–æ –Ω–µ –æ–±—Ä–∞—â–∞–ª–∏—Å—å. –°–∞–º—ã–π –ø–æ–ø—É–ª—è—Ä–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º.
- **LFU (Least Frequently Used)** ‚Äî —É–¥–∞–ª—è—é—Ç—Å—è –Ω–∞–∏–º–µ–Ω–µ–µ —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã–µ.
- **FIFO (First In, First Out)** ‚Äî —É–¥–∞–ª—è—é—Ç—Å—è —Å–∞–º—ã–µ —Å—Ç–∞—Ä—ã–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è.
- **TTL (Time To Live)** ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ –∂–∏–∑–Ω–∏ (—á–∞—Å—Ç–æ –∫–æ–º–±–∏–Ω–∏—Ä—É–µ—Ç—Å—è —Å –¥—Ä—É–≥–∏–º–∏ –ø–æ–ª–∏—Ç–∏–∫–∞–º–∏).
- **Random** ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ —Å–ª—É—á–∞–π–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ (—Ä–µ–¥–∫–æ, –Ω–æ –±—ã–≤–∞–µ—Ç).

---

## 6. –ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫—ç—à–∞ (—Å–∞–º–∞—è —Å–ª–æ–∂–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ –≤ computer science)

> "–í –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω–æ–π –Ω–∞—É–∫–µ –µ—Å—Ç—å —Ç–æ–ª—å–∫–æ –¥–≤–µ —Å–ª–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã: –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫—ç—à–∞ –∏ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –≤–µ—â–µ–π." ‚Äî –§–∏–ª –ö–∞—Ä–ª—Ç–æ–Ω

**–ü—Ä–æ–±–ª–µ–º–∞:** –¥–∞–Ω–Ω—ã–µ –≤ –∏—Å—Ç–æ—á–Ω–∏–∫–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å, –∞ –≤ –∫—ç—à–µ –æ—Å—Ç–∞–ª–∞—Å—å —Å—Ç–∞—Ä–∞—è –∫–æ–ø–∏—è.

### –ú–µ—Ç–æ–¥—ã –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–∏
- **TTL (Time To Live)** ‚Äî —Å–∞–º–æ–µ –ø—Ä–æ—Å—Ç–æ–µ. –ü–æ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ –¥–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è –∏–∑ –∫—ç—à–∞. –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –Ω–µ –±—É–¥—É—Ç –∂–∏—Ç—å –≤–µ—á–Ω–æ.
- **–Ø–≤–Ω–∞—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è (explicit invalidation)** ‚Äî –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—É —É–¥–∞–ª–∏—Ç—å –∫–ª—é—á –∏–∑ –∫—ç—à–∞.
  ```python
  def update_user(user_id, data):
      db.execute("UPDATE users SET ...", data)
      cache.delete(user_id)   # –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è
  ```
- **–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (versioning)** ‚Äî –≤–∫–ª—é—á–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–∏ –¥–∞–Ω–Ω—ã—Ö –≤ –∫–ª—é—á –∫—ç—à–∞.
  ```python
  version = get_current_version(user_id)
  cache_key = f"user:{user_id}:v{version}"
  ```
- **Write-Through** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–ø–∏—Å–∏ (—Å–º. –≤—ã—à–µ).

---

## 7. –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

| –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç      | –¢–∏–ø                          | –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å                                   |
| --------------- | ---------------------------- | ---------------------------------------------------- |
| **Redis**       | In-memory + —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö | –°–ª–æ–∂–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ, —Å–µ—Å—Å–∏–∏, –æ—á–µ—Ä–µ–¥–∏, –ª–∏–º–∏—Ç—ã        |
| **Memcached**   | –ü—Ä–æ—Å—Ç–æ–π in-memory            | –ü—Ä–æ—Å—Ç–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ, –Ω–µ –Ω—É–∂–Ω–∞ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å       |
| **Varnish**     | HTTP-–∫—ç—à                     | –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞                      |
| **CDN**         | –ì–µ–æ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π HTTP-–∫—ç—à   | –°—Ç–∞—Ç–∏–∫–∞ (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, CSS, JS), —Ä–µ–∂–µ ‚Äî –¥–∏–Ω–∞–º–∏–∫–∞     |
| **Caffeine**    | In-process –¥–ª—è Java          | –í—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ –∫—ç—à–∏                    |
| **ETag / Cache-Control** | HTTP-–∑–∞–≥–æ–ª–æ–≤–∫–∏       | –ë—Ä–∞—É–∑–µ—Ä–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –ø—Ä–æ–∫—Å–∏       |

–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ Redis –∏ Memcached —Å–º. –≤ —Ä–∞–∑–¥–µ–ª–∞—Ö [devops/redis](../devops/redis/) –∏ [devops/memcached](../devops/memcached/) (–ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏).

---

## 8. –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω—ã

### 8.1. Cache Stampede (Dog-piling)
**–°–∏–º–ø—Ç–æ–º:** –º–Ω–æ–∂–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞—é—Ç –ø—Ä–æ–º–∞—Ö –∫—ç—à–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏—Å—Ç—ë–∫ TTL) –∏ –≤—Å–µ –Ω–∞—á–∏–Ω–∞—é—Ç –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ, –≤—ã–∑—ã–≤–∞—è –ø–∏–∫–æ–≤—É—é –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ –ë–î.

**–†–µ—à–µ–Ω–∏—è:**
- **Mutex (–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞):** –ø–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å –±–µ—Ä—ë—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –∏ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç, –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∂–¥—É—Ç.
- **Probabilistic early expiration:** —Å–ª—É—á–∞–π–Ω—ã–º –æ–±—Ä–∞–∑–æ–º –æ–±–Ω–æ–≤–ª—è—Ç—å –∫—ç—à –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è TTL.
- **–í–Ω–µ—à–Ω–∏–π –ø–µ—Ä–µ—Å—á—ë—Ç:** —Ñ–æ–Ω–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç –∫—ç—à, –∞ –Ω–µ –∑–∞–ø—Ä–æ—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

### 8.2. –ì–æ—Ä—è—á–∏–µ –∫–ª—é—á–∏ (Hot Keys)
**–°–∏–º–ø—Ç–æ–º:** –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∫–ª—é—á–∏ –∑–∞–ø—Ä–∞—à–∏–≤–∞—é—Ç—Å—è –Ω–∞–º–Ω–æ–≥–æ —á–∞—â–µ –¥—Ä—É–≥–∏—Ö, –ø–µ—Ä–µ–≥—Ä—É–∂–∞—è —É–∑–µ–ª –∫—ç—à–∞.

**–†–µ—à–µ–Ω–∏—è:**
- –†–µ–ø–ª–∏–∫–∞—Ü–∏—è –∫–ª—é—á–∞ (—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —É–∑–ª–∞—Ö).
- –®–∞—Ä–¥–∏–Ω–≥ —Å —É—á—ë—Ç–æ–º –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏.
- –õ–æ–∫–∞–ª—å–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞.

### 8.3. –ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö
**–°–∏–º–ø—Ç–æ–º:** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –¥–∞–Ω–Ω—ã–µ.

**–ü—Ä–∏—á–∏–Ω—ã:** –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è, –≥–æ–Ω–∫–∏ –ø—Ä–∏ –∑–∞–ø–∏—Å–∏.

**–†–µ—à–µ–Ω–∏—è:** –≤—ã–±–æ—Ä –ø–æ–¥—Ö–æ–¥—è—â–µ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ (Write-Through, –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ), –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ TTL –∫–∞–∫ –∑–∞–ø–∞—Å–Ω–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞.

### 8.4. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∏—Ö –æ–±—ä—ë–º–æ–≤
**–°–∏–º–ø—Ç–æ–º:** –≤—ã—Ç–µ—Å–Ω—è—é—Ç—Å—è –ø–æ–ª–µ–∑–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, —á–∞—Å—Ç—ã–µ –ø—Ä–æ–º–∞—Ö–∏.

**–†–µ—à–µ–Ω–∏–µ:** –∞–Ω–∞–ª–∏–∑ —Ä–∞–±–æ—á–µ–≥–æ –Ω–∞–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö (working set), —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫–ª—é—á–µ–π.

### 8.5. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫—ç—à–∞ —Ç–∞–º, –≥–¥–µ –Ω–µ –Ω—É–∂–Ω–æ
–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ –≤—Å–µ–≥–¥–∞ –ø–æ–ª–µ–∑–Ω–æ. –ù–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –º–µ–Ω—è—é—Ç—Å—è –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É (–±–∏—Ä–∂–µ–≤—ã–µ –∫–æ—Ç–∏—Ä–æ–≤–∫–∏) ‚Äî –∫—ç—à –±—É–¥–µ—Ç –±–µ—Å–ø–æ–ª–µ–∑–µ–Ω –∏ —Ç–æ–ª—å–∫–æ –¥–æ–±–∞–≤–∏—Ç –∑–∞–¥–µ—Ä–∂–∫—É.

---

## 9. –ß–µ–∫-–ª–∏—Å—Ç: –∫–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫—ç—à

‚úÖ –î–∞–Ω–Ω—ã–µ —á–∏—Ç–∞—é—Ç—Å—è —á–∞—Å—Ç–æ, –Ω–æ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è —Ä–µ–¥–∫–æ  
‚úÖ –í—ã—á–∏—Å–ª–µ–Ω–∏—è –¥–æ—Ä–æ–≥–∏–µ (—Å–ª–æ–∂–Ω—ã–µ SQL-–∑–∞–ø—Ä–æ—Å—ã, –∞–≥—Ä–µ–≥–∞—Ü–∏–∏, –≤–Ω–µ—à–Ω–∏–µ API)  
‚úÖ –¢—Ä–µ–±—É–µ—Ç—Å—è –Ω–∏–∑–∫–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ (<10 –º—Å)  
‚úÖ –î–∞–Ω–Ω—ã–µ —Ç–µ—Ä–ø–∏–º—ã –∫ –Ω–µ–∫–æ—Ç–æ—Ä–æ–π —É—Å—Ç–∞—Ä–µ–ª–æ—Å—Ç–∏  
‚úÖ –ï—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—é  

## 10. –ß–µ–∫-–ª–∏—Å—Ç: –∫–æ–≥–¥–∞ –ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫—ç—à

‚ùå –î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –æ—á–µ–Ω—å —á–∞—Å—Ç–æ (–∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É)  
‚ùå –ö—Ä–∏—Ç–∏—á–Ω–∞ –∞–±—Å–æ–ª—é—Ç–Ω–∞—è –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å (–±–∞–Ω–∫–æ–≤—Å–∫–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏)  
‚ùå –û–±—ä—ë–º –¥–∞–Ω–Ω—ã—Ö –ø—Ä–µ–≤—ã—à–∞–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—É—é –ø–∞–º—è—Ç—å, –∞ —á–∞—Å—Ç–æ—Ç–∞ –æ–±—Ä–∞—â–µ–Ω–∏–π –Ω–∏–∑–∫–∞—è  
‚ùå –ü—Ä–æ—Å—Ç–æ—Ç–∞ –≤–∞–∂–Ω–µ–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (–Ω–µ —É—Å–ª–æ–∂–Ω—è–π—Ç–µ —Å–∏—Å—Ç–µ–º—É –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)  

---

## 11. –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞

### Cache-Aside —Å Redis (Python)

```python
import redis
import json
from db import get_user_from_db  # –≤—ã–º—ã—à–ª–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è

r = redis.Redis(host='localhost', port=6379, db=0)

def get_user(user_id: int):
    # –ü—ã—Ç–∞–µ–º—Å—è –ø–æ–ª—É—á–∏—Ç—å –∏–∑ –∫—ç—à–∞
    cached = r.get(f"user:{user_id}")
    if cached:
        return json.loads(cached)
    
    # –ü—Ä–æ–º–∞—Ö ‚Äî –∏–¥—ë–º –≤ –ë–î
    user = get_user_from_db(user_id)
    
    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∫—ç—à –Ω–∞ 1 —á–∞—Å
    r.setex(f"user:{user_id}", 3600, json.dumps(user))
    return user

def update_user(user_id: int, new_data: dict):
    # –û–±–Ω–æ–≤–ª—è–µ–º –ë–î
    update_user_in_db(user_id, new_data)
    # –ò–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ–º –∫—ç—à
    r.delete(f"user:{user_id}")
```

### –ü—Ä–∏–º–µ—Ä —Å TTL –∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–æ–π –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è stampede

```python
def get_expensive_data(key):
    # –ü—ã—Ç–∞–µ–º—Å—è –ø–æ–ª—É—á–∏—Ç—å –∏–∑ –∫—ç—à–∞
    data = cache.get(key)
    if data:
        return data
    
    # –ë–ª–æ–∫–∏—Ä—É–µ–º, —á—Ç–æ–±—ã —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –ø–æ—Ç–æ–∫ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–ª
    if cache.lock(f"lock:{key}", timeout=5):
        try:
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º –µ—â—ë —Ä–∞–∑ (–º–æ–≥–ª–∏ —É–∂–µ –∑–∞–∫–µ—à–∏—Ä–æ–≤–∞—Ç—å, –ø–æ–∫–∞ –∂–¥–∞–ª–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫—É)
            data = cache.get(key)
            if not data:
                data = expensive_computation()
                cache.set(key, data, ttl=60)
            return data
        finally:
            cache.unlock(f"lock:{key}")
    else:
        # –ñ–¥—ë–º, –ø–æ–∫–∞ –¥—Ä—É–≥–æ–π –ø–æ—Ç–æ–∫ –ø–µ—Ä–µ—Å—á–∏—Ç–∞–µ—Ç
        time.sleep(0.1)
        return cache.get(key)  # –¥–æ–ª–∂–Ω–æ —É–∂–µ –±—ã—Ç—å
```

---

## 12. –°–≤—è–∑—å —Å –¥—Ä—É–≥–∏–º–∏ —Ä–∞–∑–¥–µ–ª–∞–º–∏

- **[–ì–ª–æ—Å—Å–∞—Ä–∏–π](../glossary/)** ‚Äî –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–µ—Ä–º–∏–Ω–æ–≤: TTL, hit/miss, –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è, LRU.
- **[DevOps / Redis](../devops/redis/)** ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∫–∞, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞, –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –∫–æ–º–∞–Ω–¥—ã Redis.
- **[DevOps / Nginx](../devops/nginx/)** ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –≤ Nginx.
- **[–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ / –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å](../architecture/async.md)** ‚Äî –¥—Ä—É–≥–∏–µ —Å–ø–æ—Å–æ–±—ã –ø–æ–≤—ã—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

---

## 13. –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –Ω–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å –µ–≥–æ –Ω—É–∂–Ω–æ –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ.  
–ì–ª–∞–≤–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞:

1. **–í—Å–µ–≥–¥–∞ –∏–∑–º–µ—Ä—è–π—Ç–µ hit ratio** ‚Äî –∏–Ω–∞—á–µ –≤—ã –Ω–µ —É–∑–Ω–∞–µ—Ç–µ, —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–µ–Ω –ª–∏ –∫—ç—à.
2. **–ü–ª–∞–Ω–∏—Ä—É–π—Ç–µ –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—é –∑–∞—Ä–∞–Ω–µ–µ** ‚Äî –æ–Ω–∞ —Å–ª–æ–∂–Ω–µ–µ, —á–µ–º –∫–∞–∂–µ—Ç—Å—è.
3. **–ù–µ –∫—ç—à–∏—Ä—É–π—Ç–µ –≤—Å—ë –ø–æ–¥—Ä—è–¥** ‚Äî –æ—Ü–µ–Ω–∏—Ç–µ, —Å—Ç–æ–∏—Ç –ª–∏ –æ–≤—á–∏–Ω–∫–∞ –≤—ã–¥–µ–ª–∫–∏.
4. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π** ‚Äî –∫—ç—à –º–æ–∂–µ—Ç –≤–µ—Å—Ç–∏ —Å–µ–±—è –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ –ø—Ä–∏ –ø–∏–∫–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏—è—Ö.

### üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
- [Martin Fowler ‚Äî CacheAside](https://martinfowler.com/bliki/CacheAside.html)
- [Redis official documentation](https://redis.io/documentation)
- [AWS Caching Best Practices](https://aws.amazon.com/caching/best-practices/)
